{
  "Self_Learning_Basic": {
    "description": "基础学习设置",
    "type": "object",
    "hint": "控制插件的基本学习行为",
    "items": {
      "enable_message_capture": {
        "description": "启用消息抓取",
        "type": "bool",
        "hint": "是否抓取用户消息用于学习。关闭后插件将停止收集新消息",
        "default": true
      },
      "enable_auto_learning": {
        "description": "启用自动学习",
        "type": "bool", 
        "hint": "是否启用定时自动学习。关闭后需要手动触发学习",
        "default": true
      },
      "enable_realtime_learning": {
        "description": "启用实时学习",
        "type": "bool",
        "hint": "是否在收到消息时立即进行筛选处理。会增加实时负载",
        "default": false
      },
      "enable_realtime_llm_filter": {
        "description": "启用实时LLM筛选",
        "type": "bool",
        "hint": "是否对每条实时消息都使用LLM进行筛选。关闭可减少LLM调用频率",
        "default": false
      },
      "enable_web_interface": {
        "description": "启用Web管理界面",
        "type": "bool",
        "hint": "是否启用Web界面用于查看和管理学习数据",
        "default": true
      },
      "web_interface_port": {
        "description": "Web界面端口",
        "type": "int",
        "hint": "Web管理界面的访问端口号",
        "default": 7833
      }
    }
  },
  "Target_Settings": {
    "description": "抓取目标设置",
    "type": "object", 
    "hint": "配置要学习哪些用户的消息",
    "items": {
      "target_qq_list": {
        "description": "目标QQ号列表",
        "type": "list",
        "items": {"type": "string"},
        "hint": "指定要学习的QQ号列表。为空则学习所有用户消息。支持个人QQ号和群聊格式group_群号",
        "default": []
      },
      "target_blacklist": {
        "description": "学习黑名单",
        "type": "list", 
        "items": {"type": "string"},
        "hint": "黑名单内的成员消息不进行学习。为空则没有黑名单。支持个人QQ号和群聊格式group_群号",
        "default": []
      },
      "current_persona_name": {
        "description": "当前目标人格",
        "type": "string",
        "hint": "插件将学习并优化此人格的对话风格。需要在人格设置中存在",
        "default": "default"
      }
    }
  },
  "Model_Configuration": {
    "description": "模型配置",
    "type": "object",
    "hint": "配置用于筛选和提炼的AI模型提供商",
    "items": {
      "filter_provider_id": {
        "description": "筛选模型提供商ID",
        "type": "string",
        "hint": "从AstrBot配置的Provider中选择用于消息筛选的提供商ID，建议选择速度快、成本低的模型如gpt-4o-mini",
        "default": null
      },
      "refine_provider_id": {
        "description": "提炼模型提供商ID",
        "type": "string",
        "hint": "从AstrBot配置的Provider中选择用于深度分析和提炼对话风格的提供商ID，建议选择能力强的模型如gpt-4o",
        "default": null
      },
      "reinforce_provider_id": {
        "description": "强化模型提供商ID",
        "type": "string",
        "hint": "从AstrBot配置的Provider中选择用于强化学习的提供商ID，建议选择能力强的模型",
        "default": null
      }
    }
  },
  "Learning_Parameters": {
    "description": "学习参数",
    "type": "object",
    "hint": "控制学习过程的各种参数",
    "items": {
      "learning_interval_hours": {
        "description": "学习间隔(小时)",
        "type": "int",
        "hint": "自动学习的时间间隔，单位为小时",
        "default": 6
      },
      "min_messages_for_learning": {
        "description": "最少学习消息数量",
        "type": "int", 
        "hint": "开始学习所需的最少消息数量",
        "default": 50
      },
      "max_messages_per_batch": {
        "description": "每批处理的最大消息数量",
        "type": "int",
        "hint": "单次学习处理的最大消息数量，避免一次处理过多消息",
        "default": 200
      }
    }
  },
  "Filter_Parameters": {
    "description": "筛选参数",
    "type": "object",
    "hint": "控制消息筛选的参数",
    "items": {
      "message_min_length": {
        "description": "消息最小长度",
        "type": "int",
        "hint": "参与学习的消息最小字符长度",
        "default": 5
      },
      "message_max_length": {
        "description": "消息最大长度", 
        "type": "int",
        "hint": "参与学习的消息最大字符长度",
        "default": 500
      },
      "confidence_threshold": {
        "description": "筛选置信度阈值",
        "type": "float",
        "hint": "消息筛选的置信度阈值，0-1之间，越高越严格",
        "default": 0.7
      }
    }
  },
  "Style_Analysis": {
    "description": "风格分析参数",
    "type": "object",
    "hint": "控制对话风格分析的参数",
    "items": {
      "style_analysis_batch_size": {
        "description": "风格分析批次大小",
        "type": "int",
        "hint": "单次风格分析处理的消息数量",
        "default": 100
      },
      "style_update_threshold": {
        "description": "风格更新阈值",
        "type": "float", 
        "hint": "触发人格风格更新的置信度阈值，0-1之间",
        "default": 0.8
      }
    }
  },
  "Advanced_Settings": {
    "description": "高级设置",
    "type": "object",
    "hint": "高级用户配置选项",
    "items": {
      "debug_mode": {
        "description": "调试模式",
        "type": "bool",
        "hint": "启用详细的调试日志输出",
        "default": false
      },
      "save_raw_messages": {
        "description": "保存原始消息",
        "type": "bool",
        "hint": "是否保存未经处理的原始消息用于分析",
        "default": true
      },
      "auto_backup_interval_days": {
        "description": "自动备份间隔(天)",
        "type": "int",
        "hint": "学习数据自动备份的间隔天数，0为禁用",
        "default": 7
      }
    }
  },
  "Machine_Learning_Settings": {
    "description": "机器学习设置",
    "type": "object",
    "hint": "轻量级机器学习分析配置",
    "items": {
      "enable_ml_analysis": {
        "description": "启用ML分析",
        "type": "bool",
        "hint": "是否启用scikit-learn进行文本聚类和行为分析",
        "default": true
      },
      "max_ml_sample_size": {
        "description": "ML样本最大数量",
        "type": "int",
        "hint": "机器学习分析的最大样本数量，控制资源使用",
        "default": 100
      },
      "ml_cache_timeout_hours": {
        "description": "ML缓存超时(小时)",
        "type": "int",
        "hint": "机器学习分析结果的缓存时间",
        "default": 1
      }
    }
  },
  "Persona_Backup_Settings": {
    "description": "人格备份设置",
    "type": "object",
    "hint": "人格数据备份和恢复配置",
    "items": {
      "auto_backup_enabled": {
        "description": "启用自动备份",
        "type": "bool",
        "hint": "是否在人格更新前自动创建备份",
        "default": true
      },
      "backup_interval_hours": {
        "description": "备份间隔(小时)",
        "type": "int",
        "hint": "自动备份的时间间隔",
        "default": 24
      },
      "max_backups_per_group": {
        "description": "每群最大备份数",
        "type": "int",
        "hint": "每个群保留的最大备份数量",
        "default": 10
      }
    }
  },
  "Affection_System_Settings": {
    "description": "好感度系统设置",
    "type": "object",
    "hint": "用户好感度和bot情绪管理配置",
    "items": {
      "enable_affection_system": {
        "description": "启用好感度系统",
        "type": "bool",
        "hint": "是否启用用户好感度和情绪响应系统",
        "default": true
      },
      "max_total_affection": {
        "description": "总好感度上限",
        "type": "int",
        "hint": "bot对所有用户的总好感度上限值",
        "default": 250
      },
      "max_user_affection": {
        "description": "单用户好感度上限",
        "type": "int",
        "hint": "单个用户可获得的最大好感度",
        "default": 100
      },
      "affection_decay_rate": {
        "description": "好感度衰减比例",
        "type": "float",
        "hint": "好感度重新分配时的衰减比例，0-1之间",
        "default": 0.95
      },
      "daily_mood_change": {
        "description": "启用每日情绪变化",
        "type": "bool",
        "hint": "是否每天随机更换bot的情绪状态",
        "default": true
      },
      "mood_affect_affection": {
        "description": "情绪影响好感度变化",
        "type": "bool",
        "hint": "当前情绪是否影响好感度变化幅度",
        "default": true
      }
    }
  },
  "Mood_System_Settings": {
    "description": "情绪系统设置",
    "type": "object",
    "hint": "bot情绪状态管理配置",
    "items": {
      "enable_daily_mood": {
        "description": "启用每日情绪",
        "type": "bool",
        "hint": "是否启用每日随机情绪系统",
        "default": true
      },
      "enable_startup_random_mood": {
        "description": "启用启动时随机情绪",
        "type": "bool",
        "hint": "插件启动时是否为活跃群组设置随机初始情绪",
        "default": true
      },
      "mood_change_hour": {
        "description": "情绪更新时间",
        "type": "int",
        "hint": "每日更新情绪的小时(0-23)",
        "default": 6
      },
      "mood_persistence_hours": {
        "description": "情绪持续时间",
        "type": "int",
        "hint": "每次情绪状态持续的小时数",
        "default": 24
      }
    }
  },
  "Social_Context_Settings": {
    "description": "社交上下文注入设置",
    "type": "object",
    "hint": "控制向LLM prompt注入社交关系、好感度和情绪信息",
    "items": {
      "enable_social_context_injection": {
        "description": "启用社交上下文注入",
        "type": "bool",
        "hint": "是否向LLM prompt中注入用户社交关系、好感度和情绪信息",
        "default": true
      },
      "include_social_relations": {
        "description": "注入用户社交关系",
        "type": "bool",
        "hint": "是否在prompt中包含用户的社交关系网络信息",
        "default": true
      },
      "include_affection_info": {
        "description": "注入好感度信息",
        "type": "bool",
        "hint": "是否在prompt中包含对该用户的好感度信息",
        "default": true
      },
      "include_mood_info": {
        "description": "注入Bot情绪信息",
        "type": "bool",
        "hint": "是否在prompt中包含Bot当前的情绪状态信息",
        "default": true
      },
      "expression_patterns_hours": {
        "description": "风格特征提取时间范围(小时)",
        "type": "int",
        "hint": "从多少小时内提取学到的表达风格特征注入到prompt中，默认24小时，可设置为7*24=168小时(一周)",
        "default": 24
      },
      "context_injection_position": {
        "description": "上下文注入位置",
        "type": "string",
        "hint": "社交上下文注入到prompt的位置，可选值：start(开头)、end(结尾)",
        "default": "start"
      }
    }
  },
  "Storage_Settings": {
    "description": "存储路径设置",
    "type": "object",
    "hint": "自定义插件数据存储位置",
    "items": {
      "data_dir": {
        "description": "数据存储目录",
        "type": "string",
        "hint": "插件数据存储的根目录路径。可以是相对路径或绝对路径",
        "default": "./data/self_learning_data"
      }
    }
  },
  "Database_Settings": {
    "description": "数据库配置",
    "type": "object",
    "hint": "配置数据库类型和连接参数。支持SQLite（默认，无需配置）和MySQL（需要提前创建数据库）",
    "items": {
      "db_type": {
        "description": "数据库类型",
        "type": "string",
        "hint": "填写 sqlite 或 mysql。默认使用sqlite，适合单机部署；如需分布式部署或大规模数据，填写mysql",
        "default": "sqlite"
      },
      "mysql_host": {
        "description": "MySQL服务器地址",
        "type": "string",
        "hint": "MySQL服务器的IP地址或域名，如：localhost 或 192.168.1.100（仅当db_type为mysql时需要填写）",
        "default": "localhost"
      },
      "mysql_port": {
        "description": "MySQL端口",
        "type": "int",
        "hint": "MySQL服务器的端口号，通常为3306（仅当db_type为mysql时需要填写）",
        "default": 3306
      },
      "mysql_user": {
        "description": "MySQL用户名",
        "type": "string",
        "hint": "MySQL数据库的用户名，如：root 或 astrbot（仅当db_type为mysql时需要填写）",
        "default": "root"
      },
      "mysql_password": {
        "description": "MySQL密码",
        "type": "string",
        "hint": "MySQL数据库的密码（仅当db_type为mysql时需要填写）",
        "default": ""
      },
      "mysql_database": {
        "description": "MySQL数据库名",
        "type": "string",
        "hint": "MySQL数据库名称。使用MySQL前需要手动创建此数据库，执行SQL: CREATE DATABASE astrbot_self_learning CHARACTER SET utf8mb4;",
        "default": "astrbot_self_learning"
      },
      "max_connections": {
        "description": "最大连接数",
        "type": "int",
        "hint": "数据库连接池的最大连接数，高并发场景可适当增加",
        "default": 10
      },
      "min_connections": {
        "description": "最小连接数",
        "type": "int",
        "hint": "数据库连接池的最小连接数，保持一定预热连接提高性能",
        "default": 2
      }
    }
  },
  "API_Settings": {
    "description": "外部API设置",
    "type": "object",
    "hint": "外部API接口的安全配置",
    "items": {
      "api_key": {
        "description": "API访问密钥",
        "type": "string",
        "hint": "外部API接口的访问密钥。留空则不需要密钥认证。建议设置一个强密码保护API安全",
        "default": ""
      },
      "enable_api_auth": {
        "description": "启用API认证",
        "type": "bool",
        "hint": "是否启用API密钥认证。关闭后任何人都可以访问外部API接口",
        "default": false
      }
    }
  }
}
